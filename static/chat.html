<html>
<head>
	<script src="videochat.js" type="text/javascript"></script>
	<script src="/socket.io/socket.io.js"></script>
<style>
html, body{
	margin:0;
	padding:0;
}
.chat_window{
	box-sizing:border-box;
	width:80%;
	height:80%;
	position:relative;
	display:block;
	margin:auto;
}
.chat_window .partner_video_container {
	box-sizing:border-box;
	position:absolute;
	top:0px;
	left:0px;
	width:100%;
	height:65%;
	background:#e2e2e2;
	text-align:center;
}
.chat_window .local_video_container {
	box-sizing:border-box;
	position:absolute;
	top:65%;
	left:0px;
	width:35%;
	height:35%;
	background:#222;
	text-align:center;
}
.chat_window video{
	max-width:100%;
	max-height:100%;
}
header, footer{
	background: #222;
	height: 7%;
	height: 7vh;
}
header{
	margin-bottom: 3vh;
}
footer{
	margin-top:3vh;
}
.floating_start{
	position:absolute;
	top:40%;
	left:30%;
	width:40%;
	height:20%;
	text-align:center;
}
</style>	
</head>
<body>
<header>
</header>
	<section id="chat_window" class="chat_window">
		<div class="partner_video_container">
			<div id="floating_start" class="floating_start">
				Click to start <br/>
				<input type="button" value="Start" id="btnStart" /></div>
			<video id="received_video"></video>
		</div>
		<div class="local_video_container"><video id="local_video" muted="true"></video></div>
	</section>

	<script type="text/javascript">
		var client;
		function init(){
			client = new VideoChatClient(name);
			client.on('deviceReady', function(e){
				document.getElementById('local_video').src = window.URL.createObjectURL(e.stream);
				document.getElementById('local_video').play();
			});
			client.on('remoteVideo', function(e){
				console.log(e.stream);
				document.getElementById("received_video").src = window.URL.createObjectURL(e.stream);
				document.getElementById("received_video").play();
			});
			client.openDevice();
			document.getElementById('btnStart').addEventListener('click', function(){
				client.startChat();
				document.getElementById('floating_start').remove();
			});
			document.getElementById('chat_window').style.width = window.innerHeight * .8 * 4/3;
		}
		
		init();
	</script>
<footer>
</footer>
</body>
</html>